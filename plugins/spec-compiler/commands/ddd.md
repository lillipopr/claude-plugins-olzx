---
description: 调用领域架构师，将 PRD 转化为领域设计文档。支持 5 章结构生成、每章人工 Review、Task 工作流、上下文优化。
calls-skill: spec-compiler:for-domain-architect
---

# /ddd - 领域架构师命令

此命令调用 **for-domain-architect** Skill，从 PRD 生成领域设计文档。

## 使用场景

- 已有 PRD 文档，需要生成领域设计文档
- 需要审查现有领域设计文档的质量
- 需要基于反馈优化领域设计

## 执行说明

当用户执行此命令时：

1. **加载 Skill**：系统会自动加载 `spec-compiler:for-domain-architect` Skill
2. **执行工作流**：Skill 包含完整的执行逻辑，包括：
   - 任务创建（6 个任务：T1-T6）
   - 逐章生成（5 个章节，每章人工 Review）
   - 上下文优化（PRD 摘要、逐章处理、摘要传递）
3. **用户交互**：每章生成完成后等待用户确认

## 工作流程

```
PRD 文档 → [T1]PRD 摘要 → [T2-T6]逐章生成（生成 → 人工Review → 确认/修改）→ 5 个章节文档
```

每章生成完成后需要 **人工 Review** 确认：
- 用户确认"继续"：进入下一章
- 用户要求"修改{意见}"：根据意见修改当前章节
- 用户要求"重做"：重新生成当前章节

## 文档结构（5 章）

| 章节 | 内容 |
|------|------|
| 第一章：限界上下文 | 业务能力、上下文划分、映射 |
| 第二章：聚合设计 | 聚合根、实体、值对象（含事件发布） |
| 第三章：领域服务 | 服务判断、详细设计 |
| 第四章：应用层 | 应用服务、用户/系统行为、事件处理 |
| 第五章：入口层 | Controller、MQ、Task 层 |

## 核心特性

- **进度可见**：实时显示任务进度，不再黑盒
- **质量可控**：每步验证质量，问题早发现
- **上下文优化**：PRD 摘要、逐章生成、摘要传递，避免上下文撑爆

## 示例

```
用户: /ddd

Claude: 请提供 PRD 文档路径：

用户: ./docs/prd.md

Claude: 正在分析 PRD 并生成摘要...
✓ T1 完成：PRD 分析与摘要

正在生成第一章：限界上下文设计...
✓ T2 完成：第一章已生成

==================================================
第 1 章已完成 - 人工 Review
==================================================
章节：限界上下文设计
文档：ddd/chapter-01.md

【操作说明】
- 输入 "继续" 或 "确认"：进入下一章
- 输入 "修改 {具体修改意见}"：根据意见修改当前章节
- 输入 "重做"：重新生成当前章节
==================================================

用户: 继续

Claude: 正在生成第二章：聚合设计...
✓ T3 完成：第二章已生成

[继续直到第 5 章完成]

🏗️ 领域设计文档已完成

```

## 技术说明

**Command 类型**：直接调用 Skill（非 Agent）

**Skill 路径**：`{CLAUDE_PLUGIN_ROOT}/skills/for-domain-architect/SKILL.md`

**优势**：
- 更轻量：无需启动独立 Agent 进程
- 更快速：直接在当前会话中执行
- 更可控：Skill 包含完整流程指引，便于调试和优化
